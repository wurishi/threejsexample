var L=Object.defineProperty;var b=(t,n,e)=>n in t?L(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var f=(t,n,e)=>(b(t,typeof n!="symbol"?n+"":n,e),e);import{E as g,aj as y,b as k,ak as A,al as S,A as p}from"./example-e9f3c815.js";import{G as E}from"./GLTFLoader-27d86567.js";function u(t){const n=new Map,e=new Map,i=t.clone();return v(t,i,function(s,o){n.set(o,s),e.set(s,o)}),i.traverse(function(s){if(!s.isSkinnedMesh)return;const o=s,a=n.get(s),m=a.skeleton.bones;o.skeleton=a.skeleton.clone(),o.bindMatrix.copy(a.bindMatrix),o.skeleton.bones=m.map(function(r){return e.get(r)}),o.bind(o.skeleton,o.bindMatrix)}),i}function v(t,n,e){e(t,n);for(let i=0;i<t.children.length;i++)v(t.children[i],n.children[i],e)}class H extends g{constructor(){super(...arguments);f(this,"mixers",[])}init(e){super.init(e);const i=this.utils.createPerspectiveCamera({far:1e3},[2,3,-6],[0,1,0]);this.camera=i;const s=this.utils.createScene(null,[void 0,void 0,50]);this.scene=s,s.add(this.utils.createHemisphereLight());const o=this.utils.createDirectionalLight(null,[-3,10,-10],[4,-4,-4,4,.1,40]);s.add(o),s.add(new y(o.shadow.camera));const a=new k(new A(200,200),new S({color:10066329,depthWrite:!1}));a.rotation.x=-Math.PI/2,a.receiveShadow=!0,s.add(a),this.renderer.shadowMap.enabled=!0,new E().load("assets/models/gltf/Soldier.glb",r=>{r.scene.traverse(h=>{h instanceof k&&h.isMesh&&(h.castShadow=!0)});const c=u(r.scene),l=u(c),d=u(c),x=new p(c),M=new p(l),w=new p(d);x.clipAction(r.animations[0]).play(),M.clipAction(r.animations[1]).play(),w.clipAction(r.animations[3]).play(),c.position.x=-2,l.position.x=0,d.position.x=2,s.add(c,l,d),this.mixers.push(x,M,w)})}run(){const e=super.run();return this.mixers.forEach(i=>i.update(e)),e}}export{H as default};
